apiVersion: rabbitmq.com/v1beta1
kind: RabbitmqCluster
metadata:
  name: rabbitmq-demo
spec:
  replicas: 1
  # Optional: define RabbitMQ image or leave default
  image: rabbitmq:4.2-management
  service:
    type: ClusterIP
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  persistence:
    storageClassName: hostpath
    storage: 1Gi
  secretBackend:
    type: managed
    managed:
      name: rabbitmq-demo-default-user
  rabbitmq:
    # additional configuration to suppress deprecation warning
    additionalConfig: |
      deprecated_features.permit.management_metrics_collection = true
